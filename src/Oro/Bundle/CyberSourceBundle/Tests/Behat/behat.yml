oro_behat_extension:
  elements:
    CyberSourceForm:
      selector: 'form[name="oro_integration_channel_form"]'
      class: Oro\Bundle\TestFrameworkBundle\Behat\Element\Form
      options:
        mapping:
          Name: 'oro_integration_channel_form[name]'
          Label: 'oro_integration_channel_form[transport][labels][values][default]'
          Short Label: 'oro_integration_channel_form[transport][shortLabels][values][default]'
          Method: 'oro_integration_channel_form[transport][cbsMethod]'
          Test Mode: 'oro_integration_channel_form[transport][cbsTestMode]'
          Merchant ID: 'oro_integration_channel_form[transport][cbsMerchantId]'
          Merchant Descriptor: 'oro_integration_channel_form[transport][cbsMerchantDescriptor]'
          Profile ID: 'oro_integration_channel_form[transport][cbsProfileId]'
          Access Key: 'oro_integration_channel_form[transport][cbsAccessKey]'
          API Key: 'oro_integration_channel_form[transport][cbsApiKey]'
          API Secret Key: 'oro_integration_channel_form[transport][cbsApiSecretKey]'
          Secret Key: 'oro_integration_channel_form[transport][cbsSecretKey]'
          Ignore AVS validation: 'oro_integration_channel_form[transport][cbsIgnoreAvs]'
          Ignore CVN validation: 'oro_integration_channel_form[transport][cbsIgnoreCvn]'
          Reverse 'Soft Declined' Authorization: 'oro_integration_channel_form[transport][cbsAuthReversal]'
          Display Errors on Storefront: 'oro_integration_channel_form[transport][cbsDisplayErrors]'

    CyberSourceCreditCardForm:
      selector: 'div[data-content="payment_method_form"]'
      class: Oro\Bundle\TestFrameworkBundle\Behat\Element\Form
      options:
        mapping:
          Month: 'oro_cybersource_credit_card[expirationDate][month]'
          Year: 'oro_cybersource_credit_card[expirationDate][year]'
          Number: 'microform_number'
          CVV: 'microform_securityCode'

    CardNumberValidationMessage:
      selector:
        locator: '//div[contains(@class, "oro-cybersource-number-container")]/following-sibling::span[contains(@class, "microform-validation-failed")]'
        type: xpath

    CvvValidationMessage:
      selector:
        locator: '//div[contains(@class, "securityCode-container-wrapper")]/following-sibling::span[contains(@class, "microform-validation-failed")]'
        type: xpath

  suites:
    OroCyberSourceBundle:
      contexts:
        - Oro\Bundle\TestFrameworkBundle\Tests\Behat\Context\OroMainContext
        - Oro\Bundle\ApplicationBundle\Tests\Behat\Context\CommerceMainContext
        - Oro\Bundle\FormBundle\Tests\Behat\Context\FormContext
        - Oro\Bundle\PaymentBundle\Tests\Behat\Context\FeatureContext
        - Oro\Bundle\DataGridBundle\Tests\Behat\Context\GridContext
        - Oro\Bundle\CheckoutBundle\Tests\Behat\Context\FeatureContext
        - Oro\Bundle\ShoppingListBundle\Tests\Behat\Context\ShoppingListContext
        - Oro\Bundle\ConfigBundle\Tests\Behat\Context\FeatureContext
        - Oro\Bundle\ProductBundle\Tests\Behat\Context\FeatureContext
        - Oro\Bundle\WorkflowBundle\Tests\Behat\Context\FeatureContext
        - Oro\Bundle\AttachmentBundle\Tests\Behat\Context\AttachmentImageContext
      paths:
        - '@OroCyberSourceBundle/Tests/Behat/Features'
